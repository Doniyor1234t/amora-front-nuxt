import H from"./CO5863q7.js";import J from"./CjvRNVbI.js";import{A as K}from"./Ch0HD17Q.js";import{d as W,an as X,A as Z,x as n,r as F,aL as ee,f as s,G as t,a6 as d,aa as x,ab as f,ae as C,a8 as S,a5 as i,Y as g,a7 as te,aM as $,F as a,ak as oe}from"./BhIOAxBC.js";import{u as se,a as ae,c as le}from"./CxbYZJ0n.js";import"./DNIarZUc.js";import"./Bj-GZxSJ.js";import"./CsQoRtS4.js";import"./DepdtNhZ.js";import"./ZhWAdK_X.js";import"./C0i4JYdF.js";import"./CYrNoSPw.js";import"./jc0MLXVe.js";import"./DfxbRZFK.js";import"./DPO6Rxt8.js";import"./CLs7nh7g.js";import"./DpIuvPIc.js";import"./BMp73l0B.js";import"./HOndgPC3.js";import"./D0le91XF.js";import"./Bn2kRr4v.js";import"./Bah4nJKq.js";import"./C494JDy1.js";function re(E){return new URL(globalThis.location.href)}const ne={class:"pt-[72px]"},ie={class:"grid grid-cols-2 overflow-hidden min-h-[calc(100vh-72px)] max-lg:grid-cols-[1.1fr_0.9fr] max-md:grid-cols-1"},ce={class:"flex overflow-y-auto no-scrollbar flex-col h-[calc(100vh-72px)] bg-[#fff]"},ue=["src"],pe={class:"h-[calc(100vh-72px)] overflow-y-auto px-[72px] py-[80px] bg-white max-xl:px-12 max-lg:px-10 max-md:px-8 max-sm:px-4 max-sm:py-8"},de={key:0,class:"text-center text-[#0F0F0F] py-10"},me={key:1,class:"text-center text-[#C16371] py-10"},xe={key:2,class:"flex flex-col gap-8 w-full max-w-[620px] text-[#0F0F0F]"},ve={class:"flex justify-end"},fe={type:"button",class:"h-12 w-12 rounded-full border border-[#E4E0DA] flex items-center justify-center hover:bg-[#F7F5F0] transition-colors","aria-label":"Добавить в избранное"},ge={class:"flex flex-col gap-3"},_e={class:"text-xs tracking-[0.4em] text-[#C16371] uppercase flex items-center gap-3"},be={class:"text-[72px] font-[masvol] leading-[1] max-lg:text-[56px] max-md:text-[46px] max-sm:text-[36px]"},he={class:"font-semibold text-[26px] max-sm:text-[20px]"},ye={class:"flex flex-col gap-4"},Fe={class:"flex items-center justify-between"},ke={key:0,class:"text-xs uppercase tracking-[0.3em] text-[#C16371]"},De={key:0,class:"flex flex-wrap gap-3"},we=["onClick"],Ce={key:1,class:"text-[15px] uppercase tracking-[0.2em] text-[#CDC6BF]"},Se={class:"flex flex-col border-t border-b border-[#E8E2DC] divide-y divide-[#E8E2DC]"},$e={class:"py-6"},je={key:0,class:"mt-4"},Ee={class:"flex flex-col gap-1 uppercase text-[#3D3D3D] text-[15px]"},Le={class:"py-6"},ze={key:0,class:"mt-4"},Ue={class:"flex flex-col gap-1 uppercase text-[#3D3D3D] text-[15px]"},Pe={class:"py-6"},Be={key:0,class:"mt-4"},Me={class:"text-[15px] leading-relaxed tracking-[0.05em] text-[#3D3D3D]"},j="/images/Product-bg.jpg",rt=W({__name:"[id]",setup(E){const k=X(),D=Z(),L=re(),z=D.public?.defaultLocale??D.public?.strapiLocale??"ru",w=n(()=>k.params.locale??z),m=n(()=>k.params.id),U=n(()=>{try{return new URL(`/catalog/${m.value}`,L.origin).toString()}catch{return`/catalog/${m.value}`}}),{normalizeMediaCollection:P}=se(),{data:B,isLoading:M,isError:R}=ae(["product",m,w],()=>({path:"/products",query:{filters:{slug:{$eq:m.value},isActive:{$eq:!0}},populate:["images","collection"],locale:w.value,pagination:{page:1,pageSize:1}}}),{enabled:n(()=>!!m.value),select:o=>{if(!o?.data?.length)throw $({statusCode:404,statusMessage:"Product not found"});const e=le(o,P);if(!e)throw $({statusCode:404,statusMessage:"Product not found"});return e}}),l=n(()=>B.value),_=n(()=>l.value?.images?.map(o=>o?.url??o?.path??j)??[j]),N=n(()=>l.value?{product:{name:l.value.name,collectionName:l.value.collection?.name,fabric:l.value.fabric??null,color:l.value.color??null,size:null,url:U.value},photoUrls:_.value.slice(0,3)}:{photoUrls:_.value.slice(0,3)}),q=(o,e)=>o?e?`${o} ${e}`:o:"—",A=n(()=>l.value?.collection?.name??"Коллекция"),I=n(()=>l.value?.description??"Описание недоступно. Скоро здесь появится дополнительная информация."),T=n(()=>[l.value?.fabric?`${l.value.fabric}`:"Состав уточняйте у менеджера"]),V=n(()=>["Только химчистка","Деликатная стирка","Не отбеливать"]),O=n(()=>{const o=l.value?.availableSizes;return o?.length?o.join(", "):"Размеры уточняйте у менеджера"}),b=n(()=>{const o=l.value?.availableSizes;return o?.length?o.map(e=>typeof e=="string"?e.trim():String(e??"")).filter(e=>!!e):[]}),G=n(()=>b.value.length>0),u=F(null);ee(b,o=>{u.value=o[0]??null},{immediate:!0});const c=F({composition:!1,care:!1,description:!1}),h=o=>{c.value[o]=!c.value[o]},y=F(!1),Q=()=>{y.value=!0};return(o,e)=>{const v=H,Y=J;return a(),s(x,null,[t("div",ne,[t("div",ie,[t("div",ce,[(a(!0),s(x,null,f(_.value,(r,p)=>(a(),s("div",{key:`product-image-${p}`,class:"relative min-h-[calc(100vh-72px)] flex items-center justify-center"},[t("img",{src:r,alt:"Product image",class:"h-full w-full object-cover object-top max-xl:object-contain"},null,8,ue)]))),128))]),t("div",pe,[C(M)?(a(),s("div",de," Загрузка информации о товаре... ")):C(R)||!l.value?(a(),s("div",me," Не удалось загрузить информацию о товаре. Попробуйте позже. ")):(a(),s("div",xe,[t("div",ve,[t("button",fe,[d(v,{name:"app-icon:heart-outlined",color:"#0F0F0F",size:"22"})])]),t("div",ge,[t("span",_e,[S(i(A.value)+" ",1),e[4]||(e[4]=t("span",{class:"w-1 h-1 rounded-full bg-[#C16371]"},null,-1))]),t("h1",be,i(l.value.name),1),t("p",he,i(q(l.value.price,l.value.currency?l.value.currency:void 0)),1)]),t("div",ye,[t("div",Fe,[e[5]||(e[5]=t("p",{class:"text-xs uppercase tracking-[0.6em] text-[#3D3D3D]"},"Размер",-1)),u.value?(a(),s("span",ke,i(u.value?u.value.toUpperCase():""),1)):g("",!0)]),G.value?(a(),s("div",De,[(a(!0),s(x,null,f(b.value,r=>(a(),s("button",{key:r,type:"button",class:oe(["px-6 h-[44px] rounded-full border text-[13px] uppercase tracking-[0.25em] transition-all",[u.value===r?"!bg-[#0F0F0F] !text-white !border-[#0F0F0F]":"bg-transparent border-[#E3DED7] text-[#3D3D3D]"]]),onClick:p=>u.value=r},i(r.toUpperCase()),11,we))),128))])):(a(),s("p",Ce,i(O.value),1))]),d(Y,{class:"!rounded-[999px] !text-white !px-[48px] !h-[54px] !bg-[#0F0F0F] !border-[#0F0F0F] uppercase tracking-[0.25em] w-full max-w-[280px]",variant:"outlined",severity:"primary",onClick:Q},{default:te(()=>[...e[6]||(e[6]=[S(" Купить ",-1)])]),_:1}),t("div",Se,[t("div",$e,[t("button",{type:"button",class:"w-full flex items-center justify-between",onClick:e[0]||(e[0]=r=>h("composition"))},[e[7]||(e[7]=t("p",{class:"text-xs uppercase tracking-[0.6em] text-[#3D3D3D]"},"Состав",-1)),d(v,{name:c.value.composition?"ph:caret-up":"ph:caret-down",size:"20",color:"#0F0F0F"},null,8,["name"])]),c.value.composition?(a(),s("div",je,[t("ul",Ee,[(a(!0),s(x,null,f(T.value,(r,p)=>(a(),s("li",{key:`composition-${p}`},i(r),1))),128))])])):g("",!0)]),t("div",Le,[t("button",{type:"button",class:"w-full flex items-center justify-between",onClick:e[1]||(e[1]=r=>h("care"))},[e[8]||(e[8]=t("p",{class:"text-xs uppercase tracking-[0.6em] text-[#3D3D3D]"},"Уход",-1)),d(v,{name:c.value.care?"ph:caret-up":"ph:caret-down",size:"20",color:"#0F0F0F"},null,8,["name"])]),c.value.care?(a(),s("div",ze,[t("ul",Ue,[(a(!0),s(x,null,f(V.value,(r,p)=>(a(),s("li",{key:`care-${p}`},i(r),1))),128))])])):g("",!0)]),t("div",Pe,[t("button",{type:"button",class:"w-full flex items-center justify-between",onClick:e[2]||(e[2]=r=>h("description"))},[e[9]||(e[9]=t("p",{class:"text-xs uppercase tracking-[0.6em] text-[#3D3D3D]"},"Описание",-1)),d(v,{name:c.value.description?"ph:caret-up":"ph:caret-down",size:"20",color:"#0F0F0F"},null,8,["name"])]),c.value.description?(a(),s("div",Be,[t("p",Me,i(I.value),1)])):g("",!0)])])]))])])]),d(K,{visible:y.value,"onUpdate:visible":e[3]||(e[3]=r=>y.value=r),"service-type":"collection",metadata:N.value},null,8,["visible","metadata"])],64)}}});export{rt as default};
