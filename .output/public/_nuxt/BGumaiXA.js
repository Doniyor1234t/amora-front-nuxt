import q from"./BwTZA46_.js";import{d as R,aM as D,y as i,c as l,H as e,aa as r,ah as A,a6 as g,af as m,ab as v,Z as N,aL as V,o as a,ad as M,a7 as H,ac as Q,_ as T}from"./x2P8Usk7.js";import{u as Z}from"./q97UC36x.js";import{u as G,a as b}from"./Bd0D-cE5.js";import{a as J,m as K}from"./BnPaBQyU.js";const O={class:""},U={key:0,class:"container py-20 text-center"},W={class:"h-[100vh] w-full relative"},X=["src","alt"],Y={class:"container py-12"},ee={class:"flex flex-wrap items-center justify-between gap-6"},se={class:"text-[32px] text-[#0F0F0F]"},te={class:"container pb-20"},oe={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-8 gap-y-12"},le={key:1,class:"py-14 text-center text-[#C16371]"},ae={key:2,class:"py-14 text-center text-[#0F0F0F]"},ie={key:3,class:"relative"},ne={class:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-8 gap-y-12 max-md:gap-y-[7px] max-md:gap-x-[16px]"},ce=["onClick"],re={class:"relative overflow-hidden h-[360px] flex items-center justify-center bg-[#F9F9F9]"},de=["aria-pressed","onClick"],ue=["src","alt"],pe={class:"px-[24px] py-[20px] max-md:p-2 text-[#3D3D3D] flex items-center justify-between gap-4"},ge={class:"pb-[8px] text-xs tracking-[0.06em] uppercase"},me={class:"text-xs text-[#9B9B9B]"},ve={key:0,class:"absolute inset-0 bg-white/70 backdrop-blur-[1px] flex items-center justify-center pointer-events-none"},_e={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-8 gap-y-12 w-full px-2"},k="/images/products/Image.png",he=R({__name:"[id]",setup(xe){const F=D(),C=V(),_=Z(),n=i(()=>F.params.id),d=i(()=>!!n.value),{normalizeMediaCollection:h}=G(),{data:w,isLoading:fe,isError:ye}=b(["collection",n],()=>({path:"/collections",query:{filters:{slug:{$eq:n.value},isActive:{$eq:!0}},pagination:{page:1,pageSize:1},populate:{images:{populate:"*"},cover:{populate:"*"}}}}),{enabled:d,select:s=>J(s,h)}),{data:x,isLoading:E,isError:$,isFetching:P}=b(["collection-products",n],()=>({path:"/products",query:{filters:{isActive:{$eq:!0},collection:{slug:{$eq:n.value}}},pagination:{page:1,pageSize:60},populate:{images:{populate:"*"},variants:{populate:["size","image"]}},sort:["publishedAt:desc"]}}),{enabled:d,keepPreviousData:!0,select:s=>K(s,h)}),u=i(()=>w.value),f=i(()=>{const[s]=u.value?.images??[];return s?.url??s?.path??"/images/Collection-bg-3.jpg"}),y=i(()=>u.value?.name??"Коллекция");i(()=>u.value?.description??"Коллекция Amora, вдохновленная женственностью и современной эстетикой.");const c=i(()=>x.value?.items??[]);i(()=>x.value?.total??c.value.length);const S=s=>{if(!s.images?.length)return k;const[o]=s.images;return o?.url??o?.path??k},j=(s,o)=>s?o?`${s} ${o}`:s:"—",I=s=>{const o=s.slug||String(s.id);C.push(`/catalog/${o}`)},L=s=>{_.toggle(s)},p=s=>_.isLiked(s);return(s,o)=>{const z=q;return a(),l("div",O,[d.value?(a(),l(r,{key:1},[e("section",{class:"collection-detail-hero",style:A({backgroundImage:`url(${f.value})`})},[e("div",W,[e("img",{src:f.value,alt:y.value,class:"inset-0 w-full h-full object-contain opacity-0"},null,8,X)])],4),e("section",Y,[e("div",ee,[e("div",null,[e("h2",se," Готово к просмотру: "+g(y.value),1)])])]),e("section",te,[m(E)&&!c.value.length?(a(),l("div",oe,[(a(),l(r,null,v(8,t=>e("div",{key:`skeleton-${t}`,class:"space-y-4"},[...o[1]||(o[1]=[e("div",{class:"bg-[#F5F5F5] h-[360px] animate-pulse"},null,-1),e("div",{class:"h-3 bg-[#E2E2E2] w-3/4 animate-pulse"},null,-1)])])),64))])):m($)?(a(),l("div",le," Не удалось загрузить изделия. Попробуйте позже. ")):c.value.length===0?(a(),l("div",ae," В этой коллекции пока нет изделий. ")):(a(),l("div",ie,[e("div",ne,[(a(!0),l(r,null,v(c.value,t=>(a(),l("div",{key:t.id,class:"w-full flex flex-col justify-between cursor-pointer transition-transform hover:-translate-y-1",onClick:B=>I(t)},[e("div",re,[e("button",{type:"button",class:"absolute right-5 top-5 flex h-10 w-10 items-center justify-center transition hover:scale-105","aria-pressed":p(t.id),onClick:M(B=>L(t.id),["stop"])},[H(z,{name:"app-icon:heart-outlined",mode:"svg",class:Q(p(t.id)?"heart--liked":""),color:p(t.id)?"#000":"#0F0F0F",size:"20"},null,8,["class","color"])],8,de),e("img",{src:S(t),alt:t.name,class:"w-full h-full object-contain"},null,8,ue)]),e("div",pe,[e("div",null,[e("h2",ge,g(t.name),1),e("p",me,g(j(t.price,t.currency?t.currency:void 0)),1)])])],8,ce))),128))]),m(P)?(a(),l("div",ve,[e("div",_e,[(a(),l(r,null,v(8,t=>e("div",{key:`overlay-skeleton-${t}`,class:"hidden sm:flex flex-col gap-4 animate-pulse"},[...o[2]||(o[2]=[e("div",{class:"bg-[#F5F5F5] h-[320px]"},null,-1),e("div",{class:"px-[24px] py-[12px] space-y-2"},[e("div",{class:"h-3 w-2/3 bg-[#E2E2E2]"}),e("div",{class:"h-3 w-1/2 bg-[#E2E2E2]"})],-1)])])),64))])])):N("",!0)]))])],64)):(a(),l("div",U,[...o[0]||(o[0]=[e("p",{class:"text-[#C16371] text-lg"}," Некорректный идентификатор коллекции. ",-1)])]))])}}}),Ee=T(he,[["__scopeId","data-v-8aba0e46"]]);export{Ee as default};
