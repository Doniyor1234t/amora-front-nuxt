import X from"./BMzk4Oul.js";import Z from"./CK6klfs5.js";import{A as ee}from"./DZZQbaa0.js";import{d as te,al as oe,B as se,y as n,r as F,aN as ae,c as a,G as t,a7 as d,am as x,an as f,ac as $,a9 as L,a6 as i,Y as g,a8 as le,ai as E,bC as j,o as l,_ as re}from"./CZ6sp4SD.js";import{u as ne,a as ie,c as ce}from"./CdU2E0-H.js";import{u as ue}from"./CHQcFdsC.js";import"./0A_Q0X8c.js";import"./BNuUJLp6.js";import"./CU34pXzY.js";import"./CSHWXT1S.js";import"./ZhWAdK_X.js";import"./oaVD9RPh.js";import"./BhE-X8jW.js";import"./jc0MLXVe.js";import"./3jB_0n8r.js";import"./BNtZHqXZ.js";import"./CLs7nh7g.js";import"./IeYwxJJH.js";import"./BCbxnj01.js";import"./BLvqfgjd.js";import"./ZeTIfAuG.js";import"./BcXF0BsP.js";import"./C7QFWeAy.js";import"./3hTAds9U.js";function pe(U){return new URL(globalThis.location.href)}const de={class:"pt-[72px]"},me={class:"grid grid-cols-2 overflow-hidden min-h-[calc(100vh-72px)] max-lg:grid-cols-[1.1fr_0.9fr] max-md:grid-cols-1"},xe={class:"flex overflow-y-auto no-scrollbar flex-col h-[calc(100vh-72px)] bg-[#fff]"},ve=["src"],fe={class:"h-[calc(100vh-72px)] overflow-y-auto px-[72px] py-[80px] bg-white max-xl:px-12 max-lg:px-10 max-md:px-8 max-sm:px-4 max-sm:py-8"},ge={key:0,class:"text-center text-[#0F0F0F] py-10"},_e={key:1,class:"text-center text-[#C16371] py-10"},be={key:2,class:"flex flex-col gap-8 w-full max-w-[620px] text-[#0F0F0F]"},he={class:"flex flex-col gap-3"},ye={class:"text-xs tracking-[0.4em] text-[#C16371] uppercase flex items-center gap-3"},ke={class:"text-[72px] font-[masvol] leading-[1] max-lg:text-[56px] max-md:text-[46px] max-sm:text-[36px]"},Fe={class:"font-semibold text-[26px] max-sm:text-[20px]"},Ce={class:"flex flex-col gap-4"},De={class:"flex items-center justify-between"},we={key:0,class:"text-xs uppercase tracking-[0.3em] text-[#C16371]"},Se={key:0,class:"flex flex-wrap gap-3"},$e=["onClick"],Le={key:1,class:"text-[15px] uppercase tracking-[0.2em] text-[#CDC6BF]"},Ee={class:"flex gap-5"},je=["aria-pressed"],ze={class:"flex flex-col border-t border-b border-[#E8E2DC] divide-y divide-[#E8E2DC]"},Ue={class:"py-6"},Be={key:0,class:"mt-4"},Pe={class:"flex flex-col gap-1 uppercase text-[#3D3D3D] text-[15px]"},Re={class:"py-6"},Me={key:0,class:"mt-4"},Ne={class:"flex flex-col gap-1 uppercase text-[#3D3D3D] text-[15px]"},qe={class:"py-6"},Ie={key:0,class:"mt-4"},Ae={class:"text-[15px] leading-relaxed tracking-[0.05em] text-[#3D3D3D]"},z="/images/Product-bg.jpg",Te=te({__name:"[id]",setup(U){const C=oe(),D=se(),B=pe(),P=D.public?.defaultLocale??D.public?.strapiLocale??"ru",w=n(()=>C.params.locale??P),m=n(()=>C.params.id),R=n(()=>{try{return new URL(`/catalog/${m.value}`,B.origin).toString()}catch{return`/catalog/${m.value}`}}),{normalizeMediaCollection:M}=ne(),S=ue(),{data:N,isLoading:q,isError:I}=ie(["product",m,w],()=>({path:"/products",query:{filters:{slug:{$eq:m.value},isActive:{$eq:!0}},populate:["images","collection"],locale:w.value,pagination:{page:1,pageSize:1}}}),{enabled:n(()=>!!m.value),select:o=>{if(!o?.data?.length)throw j({statusCode:404,statusMessage:"Product not found"});const e=ce(o,M);if(!e)throw j({statusCode:404,statusMessage:"Product not found"});return e}}),s=n(()=>N.value),_=n(()=>s.value?.images?.map(o=>o?.url??o?.path??z)??[z]),A=n(()=>s.value?{product:{name:s.value.name,collectionName:s.value.collection?.name,fabric:s.value.fabric??null,color:s.value.color??null,size:null,url:R.value},photoUrls:_.value.slice(0,3)}:{photoUrls:_.value.slice(0,3)}),T=(o,e)=>o?e?`${o} ${e}`:o:"—",V=n(()=>s.value?.collection?.name??"Коллекция"),O=n(()=>s.value?.description??"Описание недоступно. Скоро здесь появится дополнительная информация."),G=n(()=>[s.value?.fabric?`${s.value.fabric}`:"Состав уточняйте у менеджера"]),Q=n(()=>["Только химчистка","Деликатная стирка","Не отбеливать"]),Y=n(()=>{const o=s.value?.availableSizes;return o?.length?o.join(", "):"Размеры уточняйте у менеджера"}),b=n(()=>{const o=s.value?.availableSizes;return o?.length?o.map(e=>typeof e=="string"?e.trim():String(e??"")).filter(e=>!!e):[]}),H=n(()=>b.value.length>0),u=F(null);ae(b,o=>{u.value=o[0]??null},{immediate:!0});const c=F({composition:!1,care:!1,description:!1}),h=o=>{c.value[o]=!c.value[o]},J=()=>{s.value&&S.toggle(s.value.id)},y=n(()=>s.value?S.isLiked(s.value.id):!1),k=F(!1),K=()=>{k.value=!0};return(o,e)=>{const W=Z,v=X;return l(),a(x,null,[t("div",de,[t("div",me,[t("div",xe,[(l(!0),a(x,null,f(_.value,(r,p)=>(l(),a("div",{key:`product-image-${p}`,class:"relative min-h-[calc(100vh-72px)] flex items-center justify-center"},[t("img",{src:r,alt:"Product image",class:"h-full w-full object-cover object-top max-xl:object-contain"},null,8,ve)]))),128))]),t("div",fe,[$(q)?(l(),a("div",ge," Загрузка информации о товаре... ")):$(I)||!s.value?(l(),a("div",_e," Не удалось загрузить информацию о товаре. Попробуйте позже. ")):(l(),a("div",be,[t("div",he,[t("span",ye,[L(i(V.value)+" ",1),e[4]||(e[4]=t("span",{class:"w-1 h-1 rounded-full bg-[#C16371]"},null,-1))]),t("h1",ke,i(s.value.name),1),t("p",Fe,i(T(s.value.price,s.value.currency?s.value.currency:void 0)),1)]),t("div",Ce,[t("div",De,[e[5]||(e[5]=t("p",{class:"text-xs uppercase tracking-[0.6em] text-[#3D3D3D]"},"Размер",-1)),u.value?(l(),a("span",we,i(u.value?u.value.toUpperCase():""),1)):g("",!0)]),H.value?(l(),a("div",Se,[(l(!0),a(x,null,f(b.value,r=>(l(),a("button",{key:r,type:"button",class:E(["px-6 h-[44px] rounded-full border text-[13px] uppercase tracking-[0.25em] transition-all",[u.value===r?"!bg-[#0F0F0F] !text-white !border-[#0F0F0F]":"bg-transparent border-[#E3DED7] text-[#3D3D3D]"]]),onClick:p=>u.value=r},i(r.toUpperCase()),11,$e))),128))])):(l(),a("p",Le,i(Y.value),1))]),t("div",Ee,[d(W,{class:"!rounded-[999px] !text-white !px-[48px] !h-[54px] !bg-[#0F0F0F] !border-[#0F0F0F] uppercase tracking-[0.25em] w-full max-w-[280px]",variant:"outlined",severity:"primary",onClick:K},{default:le(()=>[...e[6]||(e[6]=[L(" Купить ",-1)])]),_:1}),t("button",{type:"button",class:"h-12 w-12 rounded-full border border-[#E4E0DA] flex items-center justify-center hover:bg-[#F7F5F0] transition-colors","aria-pressed":y.value,onClick:J},[d(v,{name:"app-icon:heart-outlined",mode:"svg",class:E(y.value?"heart--liked":""),color:y.value?"#C16371":"#0F0F0F",size:"24"},null,8,["class","color"])],8,je)]),t("div",ze,[t("div",Ue,[t("button",{type:"button",class:"w-full flex items-center justify-between",onClick:e[0]||(e[0]=r=>h("composition"))},[e[7]||(e[7]=t("p",{class:"text-xs uppercase tracking-[0.6em] text-[#3D3D3D]"},"Состав",-1)),d(v,{name:c.value.composition?"ph:caret-up":"ph:caret-down",size:"20",color:"#0F0F0F"},null,8,["name"])]),c.value.composition?(l(),a("div",Be,[t("ul",Pe,[(l(!0),a(x,null,f(G.value,(r,p)=>(l(),a("li",{key:`composition-${p}`},i(r),1))),128))])])):g("",!0)]),t("div",Re,[t("button",{type:"button",class:"w-full flex items-center justify-between",onClick:e[1]||(e[1]=r=>h("care"))},[e[8]||(e[8]=t("p",{class:"text-xs uppercase tracking-[0.6em] text-[#3D3D3D]"},"Уход",-1)),d(v,{name:c.value.care?"ph:caret-up":"ph:caret-down",size:"20",color:"#0F0F0F"},null,8,["name"])]),c.value.care?(l(),a("div",Me,[t("ul",Ne,[(l(!0),a(x,null,f(Q.value,(r,p)=>(l(),a("li",{key:`care-${p}`},i(r),1))),128))])])):g("",!0)]),t("div",qe,[t("button",{type:"button",class:"w-full flex items-center justify-between",onClick:e[2]||(e[2]=r=>h("description"))},[e[9]||(e[9]=t("p",{class:"text-xs uppercase tracking-[0.6em] text-[#3D3D3D]"},"Описание",-1)),d(v,{name:c.value.description?"ph:caret-up":"ph:caret-down",size:"20",color:"#0F0F0F"},null,8,["name"])]),c.value.description?(l(),a("div",Ie,[t("p",Ae,i(O.value),1)])):g("",!0)])])]))])])]),d(ee,{visible:k.value,"onUpdate:visible":e[3]||(e[3]=r=>k.value=r),"service-type":"collection",metadata:A.value},null,8,["visible","metadata"])],64)}}}),mt=re(Te,[["__scopeId","data-v-0deb1b15"]]);export{mt as default};
