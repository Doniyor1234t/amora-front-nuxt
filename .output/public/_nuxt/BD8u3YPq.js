import q from"./Bfdqy3U2.js";import{u as $,a as f,c as E,m as I}from"./CcFAxS4Q.js";import{k as L,x as R,n as i,c as o,a as t,s as r,b as z,t as c,w as A,F as N,j as V,o as l,d as M}from"./JVKjnU9l.js";import"./DmJOnP-h.js";import"./C9eaLn6L.js";import"./CT51hrG7.js";import"./DFA8wFG4.js";import"./ZhWAdK_X.js";import"./BJmLeCTm.js";import"./CMun0Ja8.js";import"./jc0MLXVe.js";const Q={class:"pt-[72px]"},T={key:0,class:"container py-20 text-center"},G={key:1},H={class:"relative"},J={class:"grid grid-cols-2 relative max-h-[900px]"},K={class:"relative"},O=["src"],U={class:"relative"},W=["src"],X={class:"bg-white rounded-[500px] h-[680px] w-[520px] z-[11] absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 p-5 max-sm:hidden"},Y={class:"flex flex-col items-center justify-center h-full px-8 text-center"},Z={key:0,class:"text-[#0F0F0F]"},tt={key:1,class:"text-[#C16371]"},et={key:2},st={class:"text-[#0F0F0F] text-[55px] text-center font-[masvol]"},ot={class:"text-center text-[#3D3D3D] text-[14px] mb-[24px]"},lt={class:"container flex items-center justify-between mb-[32px] mt-[48px]"},it={class:"text-[#0F0F0F] text-[52px] font-[masvol] max-sm:text-[34px]"},at={class:"flex items-center gap-2 h-[44px]"},ct={class:"text-[#0F0F0F] text-[52px] font-[masvol] max-sm:text-[34px]"},nt={class:"container mx-auto"},rt={key:0,class:"py-10 text-center text-[#0F0F0F]"},dt={key:1,class:"py-10 text-center text-[#C16371] text-lg"},pt={key:2,class:"py-10 text-center text-[#0F0F0F]"},ut={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-8 gap-y-12"},xt={class:"bg-[#F5F5F5] rounded-3xl overflow-hidden"},mt=["src","alt"],gt={class:"px-[24px] py-[20px] text-[#3D3D3D]"},vt={class:"pb-[8px] text-xs tracking-[0.16em] uppercase"},_t={class:"text-xs text-[#9B9B9B]"},y="/images/products/dress-1.png",St=L({__name:"[id]",setup(ht){const F=R(),n=i(()=>F.params.id),d=i(()=>!!n.value),{normalizeMediaCollection:m}=$(),{data:b,isLoading:k,isError:C}=f(["collection",n],()=>({path:"/collections",query:{filters:{slug:{$eq:n.value},isActive:{$eq:!0}},pagination:{page:1,pageSize:1},populate:["images"]}}),{enabled:d,select:s=>E(s,m)}),{data:g,isLoading:w,isError:P}=f(["collection-products",n],()=>({path:"/products",query:{filters:{isActive:{$eq:!0},collection:{slug:{$eq:n.value}}},pagination:{page:1,pageSize:40},populate:["images"],sort:["publishedAt:desc"]}}),{enabled:d,keepPreviousData:!0,select:s=>I(s,m)}),p=i(()=>b.value),u=i(()=>g.value?.items??[]),j=i(()=>g.value?.total??u.value.length),v=["/images/Collection-bg-3.jpg","/images/Collection-bg-6.jpg"],_=i(()=>{const s=p.value?.images??[];return[s[0]?.url,s[1]?.url].map((e,x)=>e??v[x]??v[0])}),h=i(()=>p.value?.name??"Коллекция"),D=i(()=>p.value?.description??"Коллекция Amora, вдохновленная женственностью и современной эстетикой."),B=s=>{if(!s.images?.length)return y;const[e]=s.images;return e?.url??e?.path??y},S=(s,e)=>s?e?`${s} ${e}`:s:"—";return(s,e)=>{const x=q;return l(),o("div",Q,[d.value?(l(),o("div",G,[t("div",H,[t("div",J,[t("div",K,[t("img",{src:_.value[0],alt:"",class:"w-full max-h-[900px] object-cover"},null,8,O),e[1]||(e[1]=t("div",{class:"absolute top-0 left-0 w-full h-full bg-black opacity-25"},null,-1))]),t("div",U,[t("img",{src:_.value[1],alt:"",class:"w-full max-h-[900px] object-cover"},null,8,W),e[2]||(e[2]=t("div",{class:"absolute top-0 left-0 w-full h-full bg-black opacity-25"},null,-1))])]),t("div",X,[t("div",Y,[r(k)?(l(),o("div",Z," Загрузка коллекции... ")):r(C)?(l(),o("div",tt," Не удалось загрузить коллекцию. ")):(l(),o("div",et,[e[4]||(e[4]=t("div",{class:"flex items-center gap-2 mb-[12px] text-xs tracking-[0.3em] text-[#C16371] uppercase"}," новая коллекция ",-1)),t("h2",st,c(h.value),1),t("p",ot,c(D.value),1),z(x,{variant:"outlined",severity:"secondary",class:"!rounded-[80px] !text-[#0F0F0F] !px-[28px] !py-[14px]"},{default:A(()=>[...e[3]||(e[3]=[M(" ПОСМОТРЕТЬ ",-1)])]),_:1})]))])])]),t("div",lt,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-xs tracking-[0.3em] text-[#C16371] uppercase mb-2"}," коллекция ",-1)),t("h2",it,c(h.value),1)]),t("div",at,[t("span",ct," ("+c(j.value)+") ",1)])]),t("div",nt,[r(w)?(l(),o("div",rt," Загрузка изделий... ")):r(P)?(l(),o("div",dt," Не удалось загрузить изделия коллекции. ")):u.value.length===0?(l(),o("div",pt," В этой коллекции пока нет изделий. ")):(l(),o("div",ut,[(l(!0),o(N,null,V(u.value,a=>(l(),o("div",{key:a.id,class:"w-full flex flex-col justify-center"},[t("div",xt,[t("img",{src:B(a),alt:a.name,class:"w-full h-full object-cover"},null,8,mt)]),t("div",gt,[t("h2",vt,c(a.name),1),t("p",_t,c(S(a.price,a.currency?a.currency:void 0)),1)])]))),128))]))])])):(l(),o("div",T,[...e[0]||(e[0]=[t("p",{class:"text-[#C16371] text-lg"}," Некорректный идентификатор коллекции. ",-1)])]))])}}});export{St as default};
