import q from"./Cq9XIzeF.js";import{d as R,aM as D,y as i,c as l,H as e,aa as r,ah as A,af as g,ab as m,Z as N,aL as V,o as a,ad as M,a7 as H,ac as Q,a6 as f,_ as T}from"./BCRWh_qf.js";import{u as Z}from"./B5NfvVw7.js";import{u as G,a as y}from"./ClXqXSzW.js";import{a as J,m as K}from"./BnPaBQyU.js";const O={class:""},U={key:0,class:"container py-20 text-center"},W={class:"h-[100vh] w-full relative"},X=["src","alt"],Y={class:"container pb-20"},ee={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-8 gap-y-12"},se={key:1,class:"py-14 text-center text-[#C16371]"},te={key:2,class:"py-14 text-center text-[#0F0F0F]"},oe={key:3,class:"relative"},le={class:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-8 gap-y-12 max-md:gap-y-[7px] max-md:gap-x-[16px]"},ae=["onClick"],ie={class:"relative overflow-hidden h-[360px] flex items-center justify-center bg-[#F9F9F9]"},ne=["aria-pressed","onClick"],ce=["src","alt"],re={class:"px-[24px] py-[20px] max-md:p-2 text-[#3D3D3D] flex items-center justify-between gap-4"},de={class:"pb-[8px] text-xs tracking-[0.06em] uppercase"},ue={class:"text-xs text-[#9B9B9B]"},pe={key:0,class:"absolute inset-0 bg-white/70 backdrop-blur-[1px] flex items-center justify-center pointer-events-none"},ge={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-8 gap-y-12 w-full px-2"},b="/images/products/Image.png",me=R({__name:"[id]",setup(ve){const k=D(),F=V(),v=Z(),n=i(()=>k.params.id),d=i(()=>!!n.value),{normalizeMediaCollection:x}=G(),{data:C,isLoading:xe,isError:_e}=y(["collection",n],()=>({path:"/collections",query:{filters:{slug:{$eq:n.value},isActive:{$eq:!0}},pagination:{page:1,pageSize:1},populate:{images:{populate:"*"},cover:{populate:"*"}}}}),{enabled:d,select:s=>J(s,x)}),{data:_,isLoading:w,isError:E,isFetching:$}=y(["collection-products",n],()=>({path:"/products",query:{filters:{isActive:{$eq:!0},collection:{slug:{$eq:n.value}}},pagination:{page:1,pageSize:60},populate:{images:{populate:"*"},variants:{populate:["size","image"]}},sort:["publishedAt:desc"]}}),{enabled:d,keepPreviousData:!0,select:s=>K(s,x)}),u=i(()=>C.value),h=i(()=>{const[s]=u.value?.images??[];return s?.url??s?.path??"/images/Collection-bg-3.jpg"}),P=i(()=>u.value?.name??"Коллекция");i(()=>u.value?.description??"Коллекция Amora, вдохновленная женственностью и современной эстетикой.");const c=i(()=>_.value?.items??[]);i(()=>_.value?.total??c.value.length);const S=s=>{if(!s.images?.length)return b;const[t]=s.images;return t?.url??t?.path??b},j=(s,t)=>s?t?`${s} ${t}`:s:"—",I=s=>{const t=s.slug||String(s.id);F.push(`/catalog/${t}`)},L=s=>{v.toggle(s)},p=s=>v.isLiked(s);return(s,t)=>{const z=q;return a(),l("div",O,[d.value?(a(),l(r,{key:1},[e("section",{class:"collection-detail-hero",style:A({backgroundImage:`url(${h.value})`})},[e("div",W,[e("img",{src:h.value,alt:P.value,class:"inset-0 w-full h-full object-contain opacity-0"},null,8,X)])],4),t[3]||(t[3]=e("section",{class:"container py-12"},[e("div",{class:"flex flex-wrap items-center justify-between gap-6"},[e("div",null,[e("h2",{class:"text-[32px] text-[#0F0F0F]"}," Готово к примерке ")])])],-1)),e("section",Y,[g(w)&&!c.value.length?(a(),l("div",ee,[(a(),l(r,null,m(8,o=>e("div",{key:`skeleton-${o}`,class:"space-y-4"},[...t[1]||(t[1]=[e("div",{class:"bg-[#F5F5F5] h-[360px] animate-pulse"},null,-1),e("div",{class:"h-3 bg-[#E2E2E2] w-3/4 animate-pulse"},null,-1)])])),64))])):g(E)?(a(),l("div",se," Не удалось загрузить изделия. Попробуйте позже. ")):c.value.length===0?(a(),l("div",te," В этой коллекции пока нет изделий. ")):(a(),l("div",oe,[e("div",le,[(a(!0),l(r,null,m(c.value,o=>(a(),l("div",{key:o.id,class:"w-full flex flex-col justify-between cursor-pointer transition-transform hover:-translate-y-1",onClick:B=>I(o)},[e("div",ie,[e("button",{type:"button",class:"absolute right-5 top-5 flex h-10 w-10 items-center justify-center transition hover:scale-105","aria-pressed":p(o.id),onClick:M(B=>L(o.id),["stop"])},[H(z,{name:"app-icon:heart-outlined",mode:"svg",class:Q(p(o.id)?"heart--liked":""),color:p(o.id)?"#000":"#0F0F0F",size:"20"},null,8,["class","color"])],8,ne),e("img",{src:S(o),alt:o.name,class:"w-full h-full object-contain"},null,8,ce)]),e("div",re,[e("div",null,[e("h2",de,f(o.name),1),e("p",ue,f(j(o.price,o.currency?o.currency:void 0)),1)])])],8,ae))),128))]),g($)?(a(),l("div",pe,[e("div",ge,[(a(),l(r,null,m(8,o=>e("div",{key:`overlay-skeleton-${o}`,class:"hidden sm:flex flex-col gap-4 animate-pulse"},[...t[2]||(t[2]=[e("div",{class:"bg-[#F5F5F5] h-[320px]"},null,-1),e("div",{class:"px-[24px] py-[12px] space-y-2"},[e("div",{class:"h-3 w-2/3 bg-[#E2E2E2]"}),e("div",{class:"h-3 w-1/2 bg-[#E2E2E2]"})],-1)])])),64))])])):N("",!0)]))])],64)):(a(),l("div",U,[...t[0]||(t[0]=[e("p",{class:"text-[#C16371] text-lg"}," Некорректный идентификатор коллекции. ",-1)])]))])}}}),Fe=T(me,[["__scopeId","data-v-5ed99098"]]);export{Fe as default};
