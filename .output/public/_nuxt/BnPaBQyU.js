const o=t=>t.attributes??t,e=t=>o(t).isActive??!0,p=t=>t==null?"":typeof t=="string"?t:String(t),h=t=>{if(!t)return null;if(Array.isArray(t)){const n=t.map(l=>typeof l=="string"?l.trim():String(l??"").trim()).filter(l=>!!l);return n.length?n:null}if(typeof t=="string"){const n=t.split(/[,;]/).map(l=>l.trim()).filter(l=>!!l);return n.length?n:null}return null},y=(t,n)=>{const l=o(t),s=n(l.images),a=s.length>0?s:n(l.cover);return{id:t.id,name:l.name,slug:l.slug,description:l.description??null,images:a}},z=t=>typeof t=="object"&&t!==null&&"data"in t,A=t=>{if(!t)return[];if(Array.isArray(t))return t;if(z(t)){const n=t.data;return n?Array.isArray(n)?n:[n]:[]}return[t]},f=t=>{const[n]=A(t);return n??null},d=(t,n)=>{const l=o(t),s=h(l.availableSizes??l.sizes??null),a=f(l.collection),u=a?o(a):null,g=A(l.products).filter(e).map(i=>d(i,n)),m=l.variants?.map(i=>{const c=f(i.size),r=c?o(c):null,[b]=n(i.image);return{id:i.id,sku:i.sku??null,price:p(i.price),stock:i.stock??null,isAvailable:i.isAvailable??null,color:i.color??null,weight:i.weight??null,size:c&&r?{id:c.id,title:r.title??null,label:r.label??null,sortOrder:r.sortOrder??null,description:r.description??null}:null,image:b??null}})??[];return{id:t.id,name:l.name,slug:l.slug,price:p(l.price),currency:l.currency??null,shortDescription:l.shortDescription??null,description:l.description??null,images:n(l.images),collection:a&&u?{id:a.id,name:u.name,slug:u.slug}:void 0,fabric:l.fabric??null,color:l.color??null,fit:l.fit??null,availableSizes:s,products:g.length?g:null,variants:m.length?m:null,material:l.material??null,care:l.care??null}},v=(t,n)=>({items:t.data.filter(e).map(l=>y(l,n)),total:t.meta?.pagination?.total??t.data.length,page:t.meta?.pagination?.page??1,pageSize:t.meta?.pagination?.pageSize??t.data.length}),E=(t,n)=>({items:t.data.filter(e).map(l=>d(l,n)),total:t.meta?.pagination?.total??t.data.length,page:t.meta?.pagination?.page??1,pageSize:t.meta?.pagination?.pageSize??t.data.length}),P=t=>Array.isArray(t.data),R=t=>{if(!t)return null;if(P(t))return t.data.find(e)??null;const n=t.data;return!n||!e(n)?null:n},S=(t,n)=>{const l=R(t);return l?d(l,n):null},k=(t,n)=>{const l=t.data.find(e);return l?y(l,n):null};export{k as a,v as b,S as c,d,E as m};
