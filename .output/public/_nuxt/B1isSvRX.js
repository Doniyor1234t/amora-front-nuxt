import{_ as fe}from"./H440e5yK.js";import xe from"./B6XuyBAf.js";import ge from"./CDAb_vZu.js";import{d as be,ae as he,k as ye,B as Fe,y as i,r as w,aI as ke,c as a,G as s,Y as h,a7 as m,ag as _,ah as f,a8 as D,af as V,a6 as d,ab as C,bC as T,o as r,a9 as we,aG as q,_ as Ce}from"./DBmEu66j.js";/* empty css        */import{A as ze}from"./BF_pRK-F.js";import{u as Se,a as Pe,c as $e}from"./DtLng_MG.js";import{u as Le}from"./bkE1N0OP.js";import"./BXvx8hd-.js";import"./B9qb7P5b.js";import"./CB28B0k5.js";import"./DIrjh3kJ.js";import"./ZhWAdK_X.js";import"./6hi1sTFG.js";import"./Ba0yOk5I.js";import"./jc0MLXVe.js";import"./oXkZVNDX.js";import"./DI6hbdDC.js";import"./CLs7nh7g.js";import"./CdDQJQzK.js";import"./C-2Z9uRy.js";import"./DpRLmrtY.js";import"./DMtvbKve.js";import"./BtUR52pJ.js";import"./BAQ_ulxa.js";import"./C7pJRlL7.js";function De(G){return new URL(globalThis.location.href)}const Ee={class:"bg-[#FBFAF9]"},Be={class:"flex min-h-[calc(100vh-72px)] max-md:flex-col max-lg:flex md:basis-[50%]"},je={class:"flex overflow-y-auto no-scrollbar flex-col bg-[#fff] flex-1"},Ae={class:"md:flex max-md:hidden overflow-y-auto no-scrollbar flex-col h-full"},Ie=["src"],Ne={class:"md:hidden w-full h-full px-4 py-6"},Re={class:"product-mobile-gallery","slides-per-view":1,"space-between":12,pagination:{clickable:!0}},Ue={class:"product-mobile-gallery__image"},Me=["src"],Oe={class:"h-[calc(100vh-72px)] overflow-y-auto px-[72px] py-[80px] bg-[#FBFAF9] max-xl:px-12 max-lg:px-10 max-md:px-8 max-sm:px-4 max-sm:py-8 max-md:h-auto max-md:relative md:sticky md:top-[72px] md:basis-[50%]"},Ve={key:0,class:"text-center text-[#0F0F0F] py-10"},Te={key:1,class:"text-center text-[#C16371] py-10"},qe={key:2,class:"flex flex-col gap-8 w-full max-w-[620px] text-[#0F0F0F]"},Ge={class:"flex flex-col gap-3"},Xe={class:"text-xs text-[#C16371] flex items-center gap-3"},Qe={class:"text-[72px] font-[masvol] leading-[1] max-lg:text-[56px] max-md:text-[46px] max-sm:text-[36px]"},Ye={class:"font-semibold text-[20px] max-sm:text-[20px]"},He={class:"flex flex-col gap-4"},Je={class:"flex items-center justify-between"},Ke={key:0,class:"text-xs uppercase text-[#C16371]"},We={key:0,class:"flex flex-wrap gap-3"},Ze=["onClick"],et={key:1,class:"text-[15px] uppercase tracking-[0.2em] text-[#CDC6BF]"},tt={class:"flex gap-5"},st=["aria-pressed"],ot={class:"flex flex-col border-[#E8E2DC] divide-y divide-[#E8E2DC]"},lt={class:"py-6"},at={key:0,class:"mt-4"},rt={class:"flex flex-col gap-1"},nt={class:"py-6"},it={key:0,class:"mt-4"},ct={class:"flex font-300 flex-col gap-1 uppercase text-[#3D3D3D] text-[14px]"},ut={class:"py-6"},dt={key:0,class:"mt-4"},pt={class:"text-[15px] leading-relaxed tracking-[0.05em] text-[#3D3D3D]"},mt={key:0,class:"complementary-products-section px-4 py-16 max-sm:py-10 bg-[#FBFAF9]"},vt={class:"complementary-products container mx-auto"},_t={class:"complementary-products__header flex items-center justify-between mb-10 max-sm:mb-2.5 max-sm:flex-col max-sm:items-start max-sm:gap-6"},ft={class:"max-md:hidden complementary-products__controls flex gap-4"},xt=["onClick"],gt={class:"complementary-card__image"},bt=["src","alt"],ht=["aria-pressed","onClick"],yt={class:"complementary-card__info"},Ft={class:"complementary-card__title"},kt={class:"complementary-card__price"},wt={class:"md:hidden flex flex-wrap gap-x-2"},Ct=["onClick"],zt={class:"complementary-card__image"},St=["src","alt"],Pt=["aria-pressed","onClick"],$t={class:"complementary-card__info"},Lt={class:"complementary-card__title"},Dt={class:"complementary-card__price"},E="/images/Product-bg.jpg",Et=be({__name:"[id]",setup(G){const B=he(),X=ye(),j=Fe(),Q=De(),Y=j.public?.defaultLocale??j.public?.strapiLocale??"ru",A=i(()=>B.params.locale??Y),b=i(()=>B.params.id),H=i(()=>{try{return new URL(`/catalog/${b.value}`,Q.origin).toString()}catch{return`/catalog/${b.value}`}}),{normalizeMediaCollection:J}=Se(),y=Le(),{data:K,isLoading:W,isError:Z}=Pe(["product",b,A],()=>({path:"/products",query:{filters:{slug:{$eq:b.value},isActive:{$eq:!0}},populate:{images:{populate:"*"},collection:{populate:"*"},products:{populate:["images","collection"]},variants:{populate:["size","image"]}},locale:A.value,pagination:{page:1,pageSize:1}}}),{enabled:i(()=>!!b.value),select:e=>{if(!e?.data?.length)throw T({statusCode:404,statusMessage:"Product not found"});const t=$e(e,J);if(!t)throw T({statusCode:404,statusMessage:"Product not found"});return t}}),l=i(()=>K.value),ee=e=>{const[t]=e??[];return t?.url??t?.path??E},F=i(()=>l.value?.images?.map(e=>e?.url??e?.path??E)??[E]),te=i(()=>l.value?{product:{name:l.value.name,collectionName:l.value.collection?.name,fabric:l.value.fabric??null,color:l.value.color??null,size:null,url:H.value},photoUrls:F.value.slice(0,3)}:{photoUrls:F.value.slice(0,3)}),I=(e,t)=>{if(!e)return"—";const c=new Intl.NumberFormat("fr").format(Number(e));return t?`${c} ${t}`:e},se=i(()=>l.value?.collection?.name??"Коллекция"),oe=i(()=>l.value?.description??"Описание недоступно. Скоро здесь появится дополнительная информация."),N=e=>e?e.split(/\r?\n+/).map(t=>t.replace(/\/+$/g,"").trim()).filter(Boolean):[],le=i(()=>{const e=N(l.value?.material);return e.length?e:l.value?.fabric?[`${l.value.fabric}`]:["Состав уточняйте у менеджера"]}),ae=i(()=>{const e=N(l.value?.care);return e.length?e:["Только химчистка","Деликатная стирка","Не отбеливать"]}),re=e=>e&&e.trim()||null,k=i(()=>{const e=l.value?.variants;if(!e?.length)return[];const t=new Set;return[...e].sort((c,n)=>{const o=c.size?.sortOrder??Number.MAX_SAFE_INTEGER,u=n.size?.sortOrder??Number.MAX_SAFE_INTEGER;if(o!==u)return o-u;const ve=c.size?.label??c.size?.title??"",_e=n.size?.label??n.size?.title??"";return ve.localeCompare(_e)}).map(c=>{const n=re(c.size?.label??c.size?.title??null);if(!n)return null;const o=n.toUpperCase();return t.has(o)?null:(t.add(o),{value:o,label:o,available:c.isAvailable!==!1,variantId:c.id})}).filter(c=>!!c)}),ne=i(()=>{const e=l.value?.availableSizes;if(!e?.length)return[];const t=new Set;return e.map(p=>{const c=typeof p=="string"?p.trim():String(p??"");if(!c)return null;const n=c.toUpperCase();return t.has(n)?null:(t.add(n),{value:n,label:n,available:!0})}).filter(p=>!!p)}),z=i(()=>k.value.length?k.value:ne.value),ie=i(()=>{if(k.value.length)return k.value.map(t=>t.label).join(", ");const e=l.value?.availableSizes;return e?.length?e.join(", "):"Размеры уточняйте у менеджера"}),ce=i(()=>z.value.length>0),x=w(null);ke(z,e=>{const t=e.find(p=>p.available);x.value=t?.value??e[0]?.value??null},{immediate:!0});const v=w({composition:!1,care:!1,description:!1}),S=e=>{v.value[e]=!v.value[e]},ue=()=>{l.value&&y.toggle(l.value.id)},P=i(()=>l.value?y.isLiked(l.value.id):!1),$=w(!1),de=()=>{$.value=!0},pe=i(()=>l.value?.products??[]),L=i(()=>pe.value.map(e=>({id:e.id,slug:e.slug,name:e.name,price:I(e.price,e.currency??void 0),image:ee(e.images)}))),me=i(()=>L.value.length>0),R=w(null),U=e=>{const t=R.value;t?.swiper&&(e==="prev"?t.swiper.slidePrev():t.swiper.slideNext())},M=e=>{const t=e?.slug??e.id;t&&X.push(`/catalog/${t}`)},O=e=>{y.toggle(e)},g=e=>y.isLiked(e);return(e,t)=>{const p=fe,c=ge,n=xe;return r(),a(_,null,[s("div",Ee,[s("div",Be,[s("div",je,[s("div",Ae,[(r(!0),a(_,null,f(F.value,(o,u)=>(r(),a("div",{key:`product-image-${u}`,class:"relative min-h-[calc(100vh)] flex items-center justify-center"},[s("img",{src:o,alt:"Product image",class:"h-full w-full object-cover object-top max-xl:object-cover"},null,8,Ie)]))),128))]),s("div",Ne,[m(p,null,{default:D(()=>[s("swiper-container",Re,[(r(!0),a(_,null,f(F.value,(o,u)=>(r(),a("swiper-slide",{key:u},[s("div",Ue,[s("img",{src:o,alt:"Product image"},null,8,Me)])]))),128))])]),_:1})])]),s("div",Oe,[V(W)?(r(),a("div",Ve," Загрузка информации о товаре... ")):V(Z)||!l.value?(r(),a("div",Te," Не удалось загрузить информацию о товаре. Попробуйте позже. ")):(r(),a("div",qe,[s("div",Ge,[s("span",Xe,d(se.value),1),s("h1",Qe,d(l.value.name),1),s("p",Ye,d(I(l.value.price,l.value.currency?l.value.currency:void 0)),1)]),s("div",He,[s("div",Je,[t[6]||(t[6]=s("p",{class:"font-bold uppercase text-[14px] text-[#0F0F0F]"},"Размер",-1)),x.value?(r(),a("span",Ke,d(x.value?x.value.toUpperCase():""),1)):h("",!0)]),ce.value?(r(),a("div",We,[(r(!0),a(_,null,f(z.value,o=>(r(),a("button",{key:o.value,type:"button",class:C(["px-3 h-[22px] rounded-full border text-[14px] uppercase transition-all",[x.value===o.value?"!bg-[#0F0F0F] !text-white !border-[#0F0F0F]":"bg-transparent border-[#E3DED7] text-[#3D3D3D]"]]),onClick:u=>x.value=o.value},d(o.value.toUpperCase()),11,Ze))),128))])):(r(),a("p",et,d(ie.value),1))]),s("div",tt,[m(c,{class:"!rounded-[999px] !text-white !px-[48px] !h-[54px] !bg-[#0F0F0F] !border-[#0F0F0F] uppercase w-full max-w-[280px]",variant:"outlined",severity:"primary",onClick:de},{default:D(()=>[...t[7]||(t[7]=[we(" Купить ",-1)])]),_:1}),s("button",{type:"button",class:"h-12 w-12 rounded-full border border-[#E4E0DA] flex items-center justify-center hover:bg-[#F7F5F0] transition-colors","aria-pressed":P.value,onClick:ue},[m(n,{name:"app-icon:heart-outlined",mode:"svg",class:C(P.value?"heart--liked":""),color:P.value?"#000":"#0F0F0F",size:"24"},null,8,["class","color"])],8,st)]),s("div",ot,[s("div",lt,[s("button",{type:"button",class:"w-full flex items-center justify-between",onClick:t[0]||(t[0]=o=>S("composition"))},[t[8]||(t[8]=s("p",{class:"text-[14px] leading-5 uppercase font-bold text-[#0F0F0F]"},"Состав",-1)),m(n,{name:v.value.composition?"ph:caret-up":"ph:caret-down",size:"20",color:"#0F0F0F"},null,8,["name"])]),v.value.composition?(r(),a("div",at,[s("ul",rt,[(r(!0),a(_,null,f(le.value,(o,u)=>(r(),a("li",{class:"font-300 uppercase text-[#3D3D3D] text-[14px]",key:`composition-${u}`},d(o),1))),128))])])):h("",!0)]),s("div",nt,[s("button",{type:"button",class:"w-full flex items-center justify-between",onClick:t[1]||(t[1]=o=>S("care"))},[t[9]||(t[9]=s("p",{class:"text-[14px] uppercase tracking-[0.05em] font-semibold text-[#0F0F0F]"},"Уход",-1)),m(n,{name:v.value.care?"ph:caret-up":"ph:caret-down",size:"20",color:"#0F0F0F"},null,8,["name"])]),v.value.care?(r(),a("div",it,[s("ul",ct,[(r(!0),a(_,null,f(ae.value,(o,u)=>(r(),a("li",{key:`care-${u}`},d(o),1))),128))])])):h("",!0)]),s("div",ut,[s("button",{type:"button",class:"w-full flex items-center justify-between",onClick:t[2]||(t[2]=o=>S("description"))},[t[10]||(t[10]=s("p",{class:"text-[14px] uppercase tracking-[0.05em] font-semibold text-[#0F0F0F]"},"Описание",-1)),m(n,{name:v.value.description?"ph:caret-up":"ph:caret-down",size:"20",color:"#0F0F0F"},null,8,["name"])]),v.value.description?(r(),a("div",dt,[s("p",pt,d(oe.value),1)])):h("",!0)])])]))])])]),me.value?(r(),a("div",mt,[s("div",vt,[s("div",_t,[t[11]||(t[11]=s("h2",{class:"text-[44px] font-[masvol] text-[#0F0F0F] max-sm:text-[32px]"}," Дополните образ ",-1)),s("div",ft,[s("button",{type:"button",class:"complementary-products__control",onClick:t[3]||(t[3]=o=>U("prev"))},[m(n,{name:"ph:arrow-left",size:"16"})]),s("button",{type:"button",class:"complementary-products__control",onClick:t[4]||(t[4]=o=>U("next"))},[m(n,{name:"ph:arrow-right",size:"16"})])])]),m(p,null,{default:D(()=>[s("swiper-container",{ref_key:"complementarySliderRef",ref:R,class:"complementary-products__slider max-md:hidden","space-between":24,"slides-per-view":1.05,breakpoints:{640:{slidesPerView:1.4},768:{slidesPerView:2.1},1024:{slidesPerView:2.8},1280:{slidesPerView:3.2}}},[(r(!0),a(_,null,f(L.value,o=>(r(),a("swiper-slide",{key:o.id,class:"complementary-products__slide"},[s("div",{class:"complementary-card",onClick:u=>M(o)},[s("div",gt,[s("img",{src:o.image,alt:o.name},null,8,bt),s("button",{type:"button",class:"complementary-card__favorite","aria-pressed":g(o.id),onClick:q(u=>O(o.id),["stop"])},[m(n,{name:"app-icon:heart-outlined",mode:"svg",color:g(o.id)?"#000":"#0F0F0F",class:C(g(o.id)?"heart--liked":""),size:"22"},null,8,["color","class"])],8,ht)]),s("div",yt,[s("p",Ft,d(o.name),1),s("span",kt,d(o.price),1)])],8,xt)]))),128))],512)]),_:1}),s("div",wt,[(r(!0),a(_,null,f(L.value,o=>(r(),a("div",{key:o.id,class:"mb-8 shrink-0 grow-0 basis-[48%]"},[s("div",{class:"complementary-card",onClick:u=>M(o)},[s("div",zt,[s("img",{src:o.image,alt:o.name},null,8,St),s("button",{type:"button",class:"complementary-card__favorite","aria-pressed":g(o.id),onClick:q(u=>O(o.id),["stop"])},[m(n,{name:"app-icon:heart-outlined",mode:"svg",color:g(o.id)?"#000":"#0F0F0F",class:C(g(o.id)?"heart--liked":""),size:"22"},null,8,["color","class"])],8,Pt)]),s("div",$t,[s("p",Lt,d(o.name),1),s("span",Dt,d(o.price),1)])],8,Ct)]))),128))])])])):h("",!0),m(ze,{visible:$.value,"onUpdate:visible":t[5]||(t[5]=o=>$.value=o),"service-type":"collection",metadata:te.value},null,8,["visible","metadata"])],64)}}}),as=Ce(Et,[["__scopeId","data-v-bcf5559d"]]);export{as as default};
