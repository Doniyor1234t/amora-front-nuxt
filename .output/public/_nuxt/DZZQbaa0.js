import P from"./BMzk4Oul.js";import{_ as j}from"./3jB_0n8r.js";import G from"./BNtZHqXZ.js";import $ from"./BcXF0BsP.js";import H from"./CK6klfs5.js";import{d as W,bG as Y,bH as X,b8 as D,r as b,y,aN as M,n as q,c as i,am as C,a7 as p,a8 as d,aw as J,o as n,G as o,an as K,a9 as Q,aa as Z,Y as v,a6 as h,aj as w,bI as E,ai as ee,B as te,_ as oe}from"./CZ6sp4SD.js";const ae=u=>{switch(u){case"tailoring":return"TAILORING";case"training":return"LEARNING";case"collection":case"general":default:return"READY_PRODUCT"}},se={class:"flex flex-col gap-[20px] w-[446px] max-sm:w-[100%]"},le={key:0,class:"text-center space-y-5 py-4"},ie={class:"flex items-center justify-center gap-4 text-white text-sm"},ne={class:"text-center text-[52px] leading-none font-[masvol] mb-[12px] max-sm:text-[32px]"},re={key:0,class:"flex flex-col gap-2"},pe={key:1,class:"flex flex-col gap-3"},ce={key:2,class:"text-sm text-[#C16371]"},me={key:0},de={key:1},ue=W({__name:"AppCallBackModal",props:Y({serviceType:{default:"general"},metadata:{default:()=>({})},title:{default:"Оставить заявку"}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(u){const l=u,z=te(),f=X(u,"visible"),t=D({name:"",phone:"",telegram:"",contactMethod:"",comment:"",size:"",format:"",level:""}),x=b(!1),g=b(!1),c=b(""),r=D({visible:!1,type:"success",message:""});let m=null;const B=()=>{r.visible=!1,m&&(clearTimeout(m),m=null)},k=(a,e)=>{r.message=a,r.type=e,r.visible=!0,m&&clearTimeout(m),m=setTimeout(()=>{r.visible=!1},4e3)},A=y(()=>l.serviceType==="tailoring"),F=y(()=>l.serviceType==="collection"),_=y(()=>l.serviceType==="training"),L=()=>{t.name="",t.phone="",t.telegram="",t.contactMethod="",t.comment="",t.size=l.metadata?.product?.size?String(l.metadata.product.size):"",t.format="",t.level="",g.value=!1,c.value=""},S=()=>{f.value=!1};M(()=>f.value,a=>{a||L()}),M(()=>l.metadata?.product?.size,a=>{a&&!t.size&&(t.size=String(a))},{immediate:!0});const V=()=>{const a={source:"SITE",serviceType:ae(l.serviceType),clientName:t.name.trim(),phone:t.phone.trim()};t.telegram.trim()&&(a.telegramUsername=t.telegram.trim()),t.contactMethod&&(a.preferredContactMethod=t.contactMethod),t.comment.trim()&&(a.comment=t.comment.trim());const e=l.metadata?.product;return e&&(l.serviceType==="collection"||l.serviceType==="general")?(a.productName=e.name,a.collectionName=e.collectionName,a.fabric=e.fabric??void 0,a.color=e.color??void 0,a.size=t.size.trim()||e.size||void 0):e&&l.serviceType==="tailoring"?(a.productName=e.name,a.collectionName=e.collectionName):F.value&&t.size.trim()&&(a.size=t.size.trim()),_.value&&(a.learningFormat=t.format||void 0,a.learningLevel=t.level||void 0),a},I=async()=>{if(c.value="",!t.name.trim()||!t.phone.trim()){c.value="Пожалуйста, укажите имя и телефон.";return}x.value=!0;try{const a=V();await $fetch("https://api.amora-brand.uz/api/leads",{baseURL:z.public.apiBase,method:"POST",body:a}),g.value=!0,k("Заявка успешно отправлена","success")}catch(a){console.error(a),c.value="Не удалось отправить заявку. Попробуйте позже или свяжитесь с нами другим способом.",k("Не удалось отправить заявку","error")}finally{x.value=!1}};return q(()=>{B()}),(a,e)=>{const U=P,R=j,T=H,N=$,O=G;return n(),i(C,null,[p(O,{visible:f.value,"onUpdate:visible":e[5]||(e[5]=s=>f.value=s),modal:!0,dismissableMask:!0,closable:!1,showHeader:!1,draggable:!1,class:"!rounded-[60px] !p-[40px] max-sm:p-[20px] max-sm:w-[90%]"},{default:d(()=>[o("div",se,[g.value?(n(),i("div",le,[e[7]||(e[7]=o("div",{class:"flex flex-col items-center gap-4"},[o("svg",{width:"48",height:"36",viewBox:"0 0 48 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M16 18L21.3333 23.3333L32 12.6666",stroke:"#C16371","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"})]),o("h3",{class:"text-[40px] font-[masvol] text-[#0F0F0F]"}," Ваша заявка принята. "),o("p",{class:"text-xs uppercase tracking-[0.28em] text-[#6E6E6E]"}," Мы будем рады разделить с вами атмосферу новой коллекции и пространства бренда ")],-1)),o("div",ie,[(n(),i(C,null,K(["youtube","telegram","instagram"],s=>p(R,{key:s,href:"#",class:"flex h-11 w-11 items-center justify-center rounded-full bg-black"},{default:d(()=>[p(U,{name:`ri:${s}-line`,color:"#ffffff",size:20},null,8,["name"])]),_:2},1024)),64))]),e[8]||(e[8]=o("div",{class:"text-[11px] uppercase tracking-[0.3em] text-[#6E6E6E]"},[o("p",{class:"mb-2"},"НА БУТИК МОЖНО НАЙТИ ПО АДРЕСУ:"),o("p",null,"УЛ. ИСМАИЛАТА, 16А")],-1)),p(T,{type:"button",class:"w-full !h-[44px] !rounded-full !bg-black !border-0 !text-[14px] tracking-[0.16em] !text-white",onClick:S},{default:d(()=>[...e[6]||(e[6]=[Q(" Закрыть ",-1)])]),_:1})])):(n(),i("form",{key:1,onSubmit:Z(I,["prevent"]),class:"flex flex-col gap-[16px]"},[o("h2",ne,h(l.title),1),p(N,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=s=>t.name=s),placeholder:"ИМЯ ФАМИЛИЯ",class:"w-full !h-12 !rounded-full !border !border-[#E5E5E5] !px-[24px] !text-[14px]"},null,8,["modelValue"]),p(N,{modelValue:t.phone,"onUpdate:modelValue":e[1]||(e[1]=s=>t.phone=s),placeholder:"+998  00 000 00 00",class:"w-full !h-12 !rounded-full !border !border-[#E5E5E5] !px-[24px] !text-[14px]"},null,8,["modelValue"]),A.value?(n(),i("div",re,[e[10]||(e[10]=o("label",{class:"text-xs uppercase tracking-[0.3em] text-[#7D7D7D]"}," Удобный способ связи ",-1)),w(o("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>t.contactMethod=s),class:"w-full rounded-full border border-[#E5E5E5] px-5 py-3 text-sm uppercase tracking-[0.2em] text-[#3D3D3D]"},[...e[9]||(e[9]=[o("option",{value:""},"Не важно",-1),o("option",{value:"PHONE"},"Телефон",-1),o("option",{value:"TELEGRAM"},"Telegram",-1),o("option",{value:"WHATSAPP"},"WhatsApp",-1)])],512),[[E,t.contactMethod]])])):v("",!0),_.value?(n(),i("div",pe,[w(o("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>t.format=s),class:"w-full rounded-full border border-[#E5E5E5] px-5 py-3 text-sm uppercase tracking-[0.2em] text-[#3D3D3D]"},[...e[11]||(e[11]=[o("option",{value:""},"Формат обучения",-1),o("option",{value:"ONLINE"},"Онлайн",-1),o("option",{value:"OFFLINE"},"Офлайн",-1)])],512),[[E,t.format]]),w(o("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>t.level=s),class:"w-full rounded-full border border-[#E5E5E5] px-5 py-3 text-sm uppercase tracking-[0.2em] text-[#3D3D3D]"},[...e[12]||(e[12]=[o("option",{value:""},"Уровень",-1),o("option",{value:"BEGINNER"},"Новичок",-1),o("option",{value:"EXPERIENCED"},"Уже шью",-1)])],512),[[E,t.level]])])):v("",!0),c.value?(n(),i("p",ce,h(c.value),1)):v("",!0),p(T,{type:"submit",class:"w-full !h-[44px] !rounded-full !bg-black !border-0 !text-[14px] tracking-[0.16em] !text-white flex items-center justify-center gap-2 disabled:opacity-60",disabled:x.value},{default:d(()=>[x.value?(n(),i("span",de,"ОТПРАВКА…")):(n(),i("span",me,"ОТПРАВИТЬ")),e[13]||(e[13]=o("svg",{width:"36",height:"20",viewBox:"0 0 36 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M0 10L36 10",stroke:"white"}),o("path",{d:"M26 0C26 4.82759 30.4068 10 36 10C30.4068 10 26 15.1724 26 20",stroke:"white"})],-1))]),_:1},8,["disabled"])],32))])]),_:1},8,["visible"]),p(J,{name:"toast-fade"},{default:d(()=>[r.visible?(n(),i("div",{key:0,class:ee(["fixed right-6 top-6 z-[9999] rounded-[16px] px-5 py-4 shadow-[0_15px_40px_rgba(0,0,0,0.15)] text-xs tracking-[0.2em] uppercase",r.type==="success"?"bg-[#E8F4EC] text-[#1D6B3A]":"bg-[#FDEBEC] text-[#AD1F2B]"])},h(r.message),3)):v("",!0)]),_:1})],64)}}}),he=Object.assign(oe(ue,[["__scopeId","data-v-54181bb8"]]),{__name:"UiAppCallBackModal"});export{he as A};
