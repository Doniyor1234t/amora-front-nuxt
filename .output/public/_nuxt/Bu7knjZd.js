const r=t=>t.attributes??t,a=t=>r(t).isActive??!0,m=t=>t==null?"":typeof t=="string"?t:String(t),f=(t,l)=>{const i=r(t);return{id:t.id,name:i.name,slug:i.slug,description:i.description??null,images:l(i.images)}},A=t=>typeof t=="object"&&t!==null&&"data"in t,b=t=>{if(!t)return[];if(Array.isArray(t))return t;if(A(t)){const l=t.data;return l?Array.isArray(l)?l:[l]:[]}return[t]},p=t=>{const[l]=b(t);return l??null},u=(t,l)=>{const i=r(t),o=p(i.collection),c=o?r(o):null,d=b(i.products).filter(a).map(n=>u(n,l)),g=i.variants?.map(n=>{const s=p(n.size),e=s?r(s):null,[y]=l(n.image);return{id:n.id,sku:n.sku??null,price:m(n.price),stock:n.stock??null,isAvailable:n.isAvailable??null,color:n.color??null,weight:n.weight??null,size:s&&e?{id:s.id,title:e.title??null,label:e.label??null,sortOrder:e.sortOrder??null,description:e.description??null}:null,image:y??null}})??[];return{id:t.id,name:i.name,slug:i.slug,price:m(i.price),currency:i.currency??null,shortDescription:i.shortDescription??null,description:i.description??null,images:l(i.images),collection:o&&c?{id:o.id,name:c.name,slug:c.slug}:void 0,fabric:i.fabric??null,color:i.color??null,fit:i.fit??null,availableSizes:i.availableSizes??null,products:d.length?d:null,variants:g.length?g:null,material:i.material??null,care:i.care??null}},P=(t,l)=>({items:t.data.filter(a).map(i=>f(i,l)),total:t.meta?.pagination?.total??t.data.length,page:t.meta?.pagination?.page??1,pageSize:t.meta?.pagination?.pageSize??t.data.length}),R=(t,l)=>({items:t.data.filter(a).map(i=>u(i,l)),total:t.meta?.pagination?.total??t.data.length,page:t.meta?.pagination?.page??1,pageSize:t.meta?.pagination?.pageSize??t.data.length}),h=t=>Array.isArray(t.data),z=t=>{if(!t)return null;if(h(t))return t.data.find(a)??null;const l=t.data;return!l||!a(l)?null:l},S=(t,l)=>{const i=z(t);return i?u(i,l):null},E=(t,l)=>{const i=t.data.find(a);return i?f(i,l):null};export{R as a,u as b,S as c,P as d,E as m};
